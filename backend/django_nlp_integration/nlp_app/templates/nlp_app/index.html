<!DOCTYPE html>
<html>
<head>
    <title>NLP Integration with Django</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>NLP Integration with Django</h1>
    <form method="POST" id="prediction-form">
        {% csrf_token %}
        
        <label for="studyYear">Study Year:</label>
        <input type="text" id="studyYear" name="studyYear"><br><br>
        
        <label for="programDbId">Program DbId:</label>
        <input type="text" id="programDbId" name="programDbId"><br><br>

        <label for="programName">Program Name:</label>
        <input type="text" id="programName" name="programName"><br><br>

        <label for="programDescription">Program Description:</label>
        <input type="text" id="programDescription" name="programDescription"><br><br>

        <label for="studyDbId">Study DbId:</label>
        <input type="text" id="studyDbId" name="studyDbId"><br><br>

        <label for="studyName">Study Name:</label>
        <input type="text" id="studyName" name="studyName"><br><br>

        <label for="studyDescription">Study Description:</label>
        <input type="text" id="studyDescription" name="studyDescription"><br><br>

        <label for="studyDesign">Study Design:</label>
        <input type="text" id="studyDesign" name="studyDesign"><br><br>

        <label for="plotWidth">Plot Width:</label>
        <input type="text" id="plotWidth" name="plotWidth"><br><br>

        <label for="plotLength">Plot Length:</label>
        <input type="text" id="plotLength" name="plotLength"><br><br>

        <label for="fieldSize">Field Size:</label>
        <input type="text" id="fieldSize" name="fieldSize"><br><br>

        <label for="plantingDate">Planting Date:</label>
        <input type="text" id="plantingDate" name="plantingDate"><br><br>

        <label for="harvestDate">Harvest Date:</label>
        <input type="text" id="harvestDate" name="harvestDate"><br><br>

        <label for="locationDbId">Location DbId:</label>
        <input type="text" id="locationDbId" name="locationDbId"><br><br>

        <label for="locationName">Location Name:</label>
        <input type="text" id="locationName" name="locationName"><br><br>

        <label for="germplasmDbId">Germplasm DbId:</label>
        <input type="text" id="germplasmDbId" name="germplasmDbId"><br><br>

        <label for="germplasmName">Germplasm Name:</label>
        <input type="text" id="germplasmName" name="germplasmName"><br><br>

        <label for="germplasmSynonyms">Germplasm Synonyms:</label>
        <input type="text" id="germplasmSynonyms" name="germplasmSynonyms"><br><br>

        <label for="observationLevel">Observation Level:</label>
        <input type="text" id="observationLevel" name="observationLevel"><br><br>

        <label for="observationUnitDbId">Observation Unit DbId:</label>
        <input type="text" id="observationUnitDbId" name="observationUnitDbId"><br><br>

        <label for="observationUnitName">Observation Unit Name:</label>
        <input type="text" id="observationUnitName" name="observationUnitName"><br><br>

        <label for="replicate">Replicate:</label>
        <input type="text" id="replicate" name="replicate"><br><br>

        <label for="blockNumber">Block Number:</label>
        <input type="text" id="blockNumber" name="blockNumber"><br><br>

        <label for="plotNumber">Plot Number:</label>
        <input type="text" id="plotNumber" name="plotNumber"><br><br>

        <label for="entryType">Entry Type:</label>
        <input type="text" id="entryType" name="entryType"><br><br>

        <!-- Loop through specific traits and create input fields -->
        {% for trait in specific_traits %}
            <label for="{{ trait.id }}">{{ trait.label }}:</label>
            <input type="text" id="{{ trait.id }}" name="{{ trait.id }}"><br><br>
        {% endfor %}

        <button type="submit">Submit</button>
    </form>
    <div id="prediction-result">
        Prediction: <span id="prediction-value"></span>
    </div>
    <div id="interpretation-result">
        Interpretation: <span id="interpretation-value"></span>
    </div>

    <script>
        document.getElementById('prediction-form').onsubmit = function(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            fetch("", {
                method: "POST",
                body: formData,
                headers: {
                    "X-CSRFToken": formData.get("csrfmiddlewaretoken")
                }
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('prediction-value').textContent = data.predictions.join(', ');
                document.getElementById('interpretation-value').textContent = data.interpretation;
            });
        };
    </script>
</body>
</html>
